<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户认证</title>
    <!-- 引入Vue.js和Axios -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- 引入Element UI -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- 引入自定义CSS -->
    <link rel="stylesheet" href="/static/accounts/css/styles.css">
</head>
<body>
    <div id="app">
        {% verbatim %}
        <div class="auth-container">
            <div class="form-header">
                <h2>{{ activeForm === 'login' ? '用户登录' : '用户注册' }}</h2>
            </div>
            
            <!-- 表单切换按钮 -->
            <el-tabs v-model="activeForm" class="tabs" @tab-click="loading = false">
                <el-tab-pane label="登录" name="login"></el-tab-pane>
                <el-tab-pane label="注册" name="register"></el-tab-pane>
            </el-tabs>
            
            <!-- 登录表单 -->
            <transition name="form-fade" mode="out-in">
                <el-form v-if="activeForm === 'login'" 
                         :model="loginForm" 
                         :rules="loginRules" 
                         ref="loginForm" 
                         label-width="80px">
                    <el-form-item label="用户名" prop="username">
                        <el-input v-model="loginForm.username" placeholder="用户名或邮箱"></el-input>
                    </el-form-item>
                    
                    <el-form-item label="密码" prop="password">
                        <el-input v-model="loginForm.password" type="password" placeholder="密码"></el-input>
                    </el-form-item>
                    
                    <el-form-item>
                        <el-button type="primary" 
                                  @click="submitForm('loginForm')" 
                                  :loading="loading" 
                                  style="width: 100%">登录</el-button>
                    </el-form-item>
                    
                    <div class="form-footer">
                        <p>还没有账号？<span class="register-link" @click="switchForm('register')">立即注册</span></p>
                    </div>
                </el-form>
                
                <!-- 注册表单 -->
                <el-form v-else 
                         :model="registerForm" 
                         :rules="registerRules" 
                         ref="registerForm" 
                         label-width="100px">
                    <el-form-item label="用户名" prop="username">
                        <el-input v-model="registerForm.username" placeholder="请输入用户名"></el-input>
                    </el-form-item>
                    
                    <el-form-item label="密码" prop="password">
                        <el-input v-model="registerForm.password" type="password" placeholder="请输入密码"></el-input>
                    </el-form-item>
                    
                    <el-form-item label="确认密码" prop="confirmPassword">
                        <el-input v-model="registerForm.confirmPassword" type="password" placeholder="请再次输入密码"></el-input>
                    </el-form-item>
                    
                    <el-form-item label="邮箱" prop="email">
                        <el-input v-model="registerForm.email" placeholder="请输入邮箱"></el-input>
                    </el-form-item>
                    
                    <el-form-item label="手机号码" prop="phone">
                        <el-input v-model="registerForm.phone" placeholder="请输入手机号码（选填）"></el-input>
                    </el-form-item>
                    
                    <el-form-item>
                        <el-button type="primary" 
                                  @click="submitForm('registerForm')" 
                                  :loading="loading" 
                                  style="width: 100%">立即注册</el-button>
                    </el-form-item>
                    
                    <div class="form-footer">
                        <p>已有账号？<span class="login-link" @click="switchForm('login')">立即登录</span></p>
                    </div>
                </el-form>
            </transition>
        </div>
        {% endverbatim %}
    </div>

    <!-- 引入自定义JS -->
    <script src="/static/accounts/js/auth.js"></script>
</body>
</html> 